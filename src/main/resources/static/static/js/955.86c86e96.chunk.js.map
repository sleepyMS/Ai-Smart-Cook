{"version":3,"file":"static/js/955.86c86e96.chunk.js","mappings":"4KAIA,MA+JA,EA/JiBA,KACf,MAAOC,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,KAC9BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAYC,IAAiBJ,EAAAA,EAAAA,UAAS,CAAC,IACvCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,KAGnCO,EAAAA,EAAAA,YAAU,KACUC,WAChB,IACE,MAAMC,QAAuBC,MAAM,gCAC7BC,QAAmBF,EAAeG,OACxCb,EAAUY,GAEV,MAAME,QAAsBH,MAAM,+BAC5BI,QAAkBD,EAAcD,OAGtC,GAFAN,EAASQ,IAEJL,EAAeM,KAAOF,EAAcE,GACvC,MAAM,IAAIC,MAAM,+FAEpB,CAAE,MAAOC,GACPC,QAAQD,MAAM,sFAAsBA,EACtC,CAAC,QACCf,GAAW,EACb,GAGFiB,EAAW,GACV,IAgGH,OAZAZ,EAAAA,EAAAA,YAAU,KACR,MAAMa,EAAmBC,aAAaC,QAAQ,cAC1CF,GACFhB,EAAcmB,KAAKC,MAAMJ,IAG3B,MAAMK,EAAcJ,aAAaC,QAAQ,QACrCG,GACFnB,EAASiB,KAAKC,MAAMC,GACtB,GACC,KAGDC,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,cAAaF,UACzBC,EAAAA,EAAAA,KAACE,EAAAA,GAAI,CAACC,GAAI,IAAGJ,SAAC,aAEhBD,EAAAA,EAAAA,MAAA,OAAKG,UAAU,kBAAiBF,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,oCACH1B,GACC2B,EAAAA,EAAAA,KAAA,KAAAD,SAAG,gBAEHC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,aAAYF,SACvB7B,EAAOkC,KAAI,CAACC,EAAOC,KAClBR,EAAAA,EAAAA,MAAA,MAAgBG,UAAU,aAAYF,SAAA,EACpCC,EAAAA,EAAAA,KAACE,EAAAA,GAAI,CAACC,GAAIV,aAAaC,QAAQ,QAAO,YAAAa,OAAeF,EAAMG,IAAO,IAAKC,QAASA,IA1GnED,KACzB,GAAIf,aAAaC,QAAQ,QAAS,CAChC,MAAMgB,EAAgB,IAAKnC,GAC3BmC,EAAcF,IAAOE,EAAcF,IAAO,GAAK,EAC/ChC,EAAckC,GACdjB,aAAakB,QAAQ,aAAchB,KAAKiB,UAAUF,GACpD,MACEG,MAAM,qDACR,EAkGkGC,CAAkBT,EAAMG,IAAIT,UAChHD,EAAAA,EAAAA,MAAA,MAAAC,SAAA,CAAI,iBAAKM,EAAMU,iBAEjBf,EAAAA,EAAAA,KAAA,KAAAD,SAAIM,EAAMW,QACVlB,EAAAA,EAAAA,MAAA,KAAAC,SAAA,CAAG,uBAAMxB,EAAW8B,EAAMG,KAAO,KAChCf,aAAaC,QAAQ,UACpBI,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,UAAQS,QAASA,IArGhB7B,WACnB,MAAMqC,EAAOtB,KAAKC,MAAMH,aAAaC,QAAQ,SAC7C,GAAIuB,IAGyB,IAFV,IAAIxC,GACcyC,WAAUC,GAAQA,EAAKC,UAAYZ,GAAMW,EAAKE,OAASJ,EAAKI,OACjE,CAC5B,MAAMC,EAAapD,EAAOqD,MAAKlB,GAASA,EAAMG,KAAOA,IACrD,IACE,MAAMgB,QAAiB1C,MAAM,6BAA8B,CACzD2C,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMhC,KAAKiB,UAAU,CACnBQ,QAASE,EAAWd,GACpBO,WAAYO,EAAWP,WACvBM,KAAMJ,EAAKI,SAGf,IAAIG,EAASrC,GAOX,MAAM,IAAIC,MAAM,8EAPD,CACf,MAAMwC,QAAqBJ,EAASxC,OAE9B6C,EAAe,IAAIpD,EAAOmD,GAChClD,EAASmD,GACTpC,aAAakB,QAAQ,OAAQhB,KAAKiB,UAAUiB,GAC9C,CAGF,CAAE,MAAOxC,GACPC,QAAQD,MAAM,oEAAmBA,EACnC,CACF,CACF,EAqEyCyC,CAAazB,EAAMG,IAAIT,SAAC,wBAC/CC,EAAAA,EAAAA,KAAA,UAAQS,QAASA,IAlEhB7B,WACnB,MAAMqC,EAAOtB,KAAKC,MAAMH,aAAaC,QAAQ,SAC7C,GAAIuB,EAAM,CACR,MAAMc,EAAoBtD,EAAMyC,WAAUC,GAAQA,EAAKC,UAAYZ,GAAMW,EAAKE,OAASJ,EAAKI,OAE5F,IAA2B,IAAvBU,EAA0B,CAC5B,MAAMC,EAAYvD,EAAMsD,GAExB,IACE,IAAIC,IAAaA,EAAUxB,GAezB,MAAM,IAAIpB,MAAM,4EAVhB,WAJuBN,MAAM,8BAADyB,OAA+ByB,EAAUxB,IAAM,CACzEiB,OAAQ,YAGGtC,GAOX,MAAM,IAAIC,MAAM,8EAPD,CAEf,MAAMyC,EAAe,IAAIpD,GACzBoD,EAAaI,OAAOF,EAAmB,GACvCrD,EAASmD,GACTpC,aAAakB,QAAQ,OAAQhB,KAAKiB,UAAUiB,GAC9C,CAMJ,CAAE,MAAOxC,GACPC,QAAQD,MAAM,oEAAmBA,EACnC,CACF,CACF,GAoCyC6C,CAAa7B,EAAMG,IAAIT,SAAC,wCAGnDD,EAAAA,EAAAA,MAAA,KAAAC,SAAA,CAAG,8BAAQtB,EAAM0D,QAAOhB,GAAQA,EAAKC,UAAYf,EAAMG,KAAI4B,YAZpD9B,YAkBb,C","sources":["components/QuestionBoard/Questionboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport \"./Questionboard.css\";\n\nconst Question = () => {\n  const [boards, setBoards] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [viewCounts, setViewCounts] = useState({});\n  const [likes, setLikes] = useState([]);\n\n  // 게시판 데이터와 좋아요 정보 가져오기\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const boardsResponse = await fetch('http://localhost:817/boards/');\n        const boardsData = await boardsResponse.json();\n        setBoards(boardsData);\n\n        const likesResponse = await fetch('http://localhost:817/likes/');\n        const likesData = await likesResponse.json();\n        setLikes(likesData);\n\n        if (!boardsResponse.ok || !likesResponse.ok) {\n          throw new Error('데이터를 불러오는데 실패했습니다');\n        }\n      } catch (error) {\n        console.error('데이터를 불러오는 중 오류 발생:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  // 조회수 증가 함수\n  const increaseViewCount = (id) => {\n    if (localStorage.getItem('user')) {\n      const newViewCounts = { ...viewCounts };\n      newViewCounts[id] = (newViewCounts[id] || 0) + 1;\n      setViewCounts(newViewCounts);\n      localStorage.setItem('viewCounts', JSON.stringify(newViewCounts));\n    } else {\n      alert(\"로그인을 해주세요.\");\n    }\n  };\n\n // 좋아요 증가 함수\nconst increaseLike = async (id) => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (user) {\n    const newLikes = [...likes];\n    const existingLikeIndex = newLikes.findIndex(like => like.boardId === id && like.nick === user.nick);\n    if (existingLikeIndex === -1) {\n      const foundBoard = boards.find(board => board.id === id);\n      try {\n        const response = await fetch(`http://localhost:817/likes`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ \n            boardId: foundBoard.id,\n            titleBoard: foundBoard.titleBoard,\n            nick: user.nick \n          }),\n        });\n        if (response.ok) {\n          const responseData = await response.json();\n          // 좋아요 추가 후 상태 업데이트\n          const updatedLikes = [...likes, responseData];\n          setLikes(updatedLikes);\n          localStorage.setItem('like', JSON.stringify(updatedLikes));\n        } else {\n          throw new Error('좋아요 추가에 실패했습니다');\n        }\n      } catch (error) {\n        console.error('좋아요 추가 중 오류 발생:', error);\n      }\n    }\n  }\n};\n\n// 좋아요 감소 함수\nconst decreaseLike = async (id) => {\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (user) {\n    const existingLikeIndex = likes.findIndex(like => like.boardId === id && like.nick === user.nick);\n\n    if (existingLikeIndex !== -1) {\n      const foundLike = likes[existingLikeIndex];\n\n      try {\n        if (foundLike && foundLike.id) {\n          const response = await fetch(`http://localhost:817/likes/${foundLike.id}`, {\n            method: 'DELETE',\n          });\n\n          if (response.ok) {\n            // 좋아요 삭제 후 상태 업데이트\n            const updatedLikes = [...likes];\n            updatedLikes.splice(existingLikeIndex, 1);\n            setLikes(updatedLikes);\n            localStorage.setItem('like', JSON.stringify(updatedLikes));\n          } else {\n            throw new Error('좋아요 삭제에 실패했습니다');\n          }\n        } else {\n          throw new Error('좋아요 ID를 찾을 수 없습니다');\n        }\n      } catch (error) {\n        console.error('좋아요 삭제 중 오류 발생:', error);\n      }\n    }\n  }\n};\n\n  useEffect(() => {\n    const storedViewCounts = localStorage.getItem('viewCounts');\n    if (storedViewCounts) {\n      setViewCounts(JSON.parse(storedViewCounts));\n    }\n\n    const storedLikes = localStorage.getItem('like');\n    if (storedLikes) {\n      setLikes(JSON.parse(storedLikes));\n    }\n  }, []);\n\n  return (\n    <div>\n      <h1 className='header_logo'>\n        <Link to= '/'>MOTIV</Link>\n      </h1>\n      <div className=\"board-container\">\n        <h2>게시물 목록</h2>\n        {loading ? (\n          <p>Loading...</p>\n        ) : (\n          <ul className=\"board-list\">\n            {boards.map((board, index) => (\n              <li key={index} className=\"board-item\">\n                <Link to={localStorage.getItem('user') ? `/inboard/${board.id}` : '#'} onClick={() => increaseViewCount(board.id)}>\n                  <h3>제목: {board.titleBoard}</h3>\n                </Link>\n                <p>{board.name}</p>\n                <p>조회수: {viewCounts[board.id] || 0}</p>\n                {localStorage.getItem('user') && (\n                  <div>\n                    <button onClick={() => increaseLike(board.id)}>좋아요</button>\n                    <button onClick={() => decreaseLike(board.id)}>좋아요 취소</button>\n                  </div>\n                )}\n                <p>좋아요 수: {likes.filter(like => like.boardId === board.id).length}</p>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Question;\n"],"names":["Question","boards","setBoards","useState","loading","setLoading","viewCounts","setViewCounts","likes","setLikes","useEffect","async","boardsResponse","fetch","boardsData","json","likesResponse","likesData","ok","Error","error","console","fetchData","storedViewCounts","localStorage","getItem","JSON","parse","storedLikes","_jsxs","children","_jsx","className","Link","to","map","board","index","concat","id","onClick","newViewCounts","setItem","stringify","alert","increaseViewCount","titleBoard","name","user","findIndex","like","boardId","nick","foundBoard","find","response","method","headers","body","responseData","updatedLikes","increaseLike","existingLikeIndex","foundLike","splice","decreaseLike","filter","length"],"sourceRoot":""}