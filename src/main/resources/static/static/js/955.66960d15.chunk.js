"use strict";(self.webpackChunkk_project240313=self.webpackChunkk_project240313||[]).push([[955],{955:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var s=o(43),r=o(475),a=o(579);const c=()=>{const[e,t]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:817/boards/"),o=await e.json();if(t(o),console.log(o),!e.ok)throw new Error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")}catch(e){console.error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}finally{c(!1)}})()}),[]);const[l,n]=(0,s.useState)({}),[i,h]=(0,s.useState)({});return(0,s.useEffect)((()=>{const e=localStorage.getItem("viewCounts");e&&n(JSON.parse(e));const t=localStorage.getItem("likes");t&&h(JSON.parse(t))}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"header_logo",children:(0,a.jsx)(r.N_,{to:"/",children:"MOTIV"})}),(0,a.jsxs)("div",{className:"board-container",children:[(0,a.jsx)("h2",{children:"\uac8c\uc2dc\ubb3c \ubaa9\ub85d"}),o?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsx)("ul",{className:"board-list",children:e.length>0&&e.map(((e,t)=>(0,a.jsxs)("li",{className:"board-item",children:[(0,a.jsx)(r.N_,{to:localStorage.getItem("user")?"/inboard/".concat(e.id):"#",onClick:()=>(e=>{if(localStorage.getItem("user")){const t={...l};t[e]=(t[e]||0)+1,n(t),localStorage.setItem("viewCounts",JSON.stringify(t))}else alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694.")})(e.id),children:(0,a.jsxs)("h3",{children:["\uc81c\ubaa9: ",e.titleBoard]})}),(0,a.jsx)("p",{children:e.name}),(0,a.jsxs)("p",{children:["\uc870\ud68c\uc218: ",l[e.id]||0]}),localStorage.getItem("user")&&(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>(e=>{const t=JSON.parse(localStorage.getItem("user"));if(t){const o={...i};o[e]=o[e]||[],o[e].includes(t.name)||(o[e].push(t.name),h(o),localStorage.setItem("likes",JSON.stringify(o)),fetch("http://localhost:817/boards/".concat(e,"/like"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name})}).then((e=>{if(!e.ok)throw new Error("\uc88b\uc544\uc694 \uc815\ubcf4\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")})).catch((e=>console.error("\uc88b\uc544\uc694 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e))))}})(e.id),children:"\uc88b\uc544\uc694"}),(0,a.jsx)("button",{onClick:()=>(e=>{const t=JSON.parse(localStorage.getItem("user"));if(t&&i[e]){const o={...i};o[e]=o[e].filter((e=>e!==t.name)),h(o),localStorage.setItem("likes",JSON.stringify(o)),fetch("http://localhost:817/boards/".concat(e,"/like/").concat(t.name),{method:"DELETE"}).then((e=>{if(!e.ok)throw new Error("\uc88b\uc544\uc694 \uc815\ubcf4\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")})).catch((e=>console.error("\uc88b\uc544\uc694 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)))}})(e.id),children:"\uc88b\uc544\uc694 \ucde8\uc18c"})]}),(0,a.jsxs)("p",{children:["\uc88b\uc544\uc694 \uc218: ",i[e.id]?i[e.id].length:0]})]},t)))})]})]})}}}]);
//# sourceMappingURL=955.66960d15.chunk.js.map