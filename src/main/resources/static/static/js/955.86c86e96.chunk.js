"use strict";(self.webpackChunkk_project240313=self.webpackChunkk_project240313||[]).push([[955],{955:(t,e,o)=>{o.r(e),o.d(e,{default:()=>c});var s=o(43),r=o(475),a=o(579);const c=()=>{const[t,e]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[i,n]=(0,s.useState)({}),[l,d]=(0,s.useState)([]);(0,s.useEffect)((()=>{(async()=>{try{const t=await fetch("http://localhost:817/boards/"),o=await t.json();e(o);const s=await fetch("http://localhost:817/likes/"),r=await s.json();if(d(r),!t.ok||!s.ok)throw new Error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")}catch(t){console.error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",t)}finally{c(!1)}})()}),[]);return(0,s.useEffect)((()=>{const t=localStorage.getItem("viewCounts");t&&n(JSON.parse(t));const e=localStorage.getItem("like");e&&d(JSON.parse(e))}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"header_logo",children:(0,a.jsx)(r.N_,{to:"/",children:"MOTIV"})}),(0,a.jsxs)("div",{className:"board-container",children:[(0,a.jsx)("h2",{children:"\uac8c\uc2dc\ubb3c \ubaa9\ub85d"}),o?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsx)("ul",{className:"board-list",children:t.map(((e,o)=>(0,a.jsxs)("li",{className:"board-item",children:[(0,a.jsx)(r.N_,{to:localStorage.getItem("user")?"/inboard/".concat(e.id):"#",onClick:()=>(t=>{if(localStorage.getItem("user")){const e={...i};e[t]=(e[t]||0)+1,n(e),localStorage.setItem("viewCounts",JSON.stringify(e))}else alert("\ub85c\uadf8\uc778\uc744 \ud574\uc8fc\uc138\uc694.")})(e.id),children:(0,a.jsxs)("h3",{children:["\uc81c\ubaa9: ",e.titleBoard]})}),(0,a.jsx)("p",{children:e.name}),(0,a.jsxs)("p",{children:["\uc870\ud68c\uc218: ",i[e.id]||0]}),localStorage.getItem("user")&&(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>(async e=>{const o=JSON.parse(localStorage.getItem("user"));if(o&&-1===[...l].findIndex((t=>t.boardId===e&&t.nick===o.nick))){const r=t.find((t=>t.id===e));try{const t=await fetch("http://localhost:817/likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boardId:r.id,titleBoard:r.titleBoard,nick:o.nick})});if(!t.ok)throw new Error("\uc88b\uc544\uc694 \ucd94\uac00\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4");{const e=await t.json(),o=[...l,e];d(o),localStorage.setItem("like",JSON.stringify(o))}}catch(s){console.error("\uc88b\uc544\uc694 \ucd94\uac00 \uc911 \uc624\ub958 \ubc1c\uc0dd:",s)}}})(e.id),children:"\uc88b\uc544\uc694"}),(0,a.jsx)("button",{onClick:()=>(async t=>{const e=JSON.parse(localStorage.getItem("user"));if(e){const s=l.findIndex((o=>o.boardId===t&&o.nick===e.nick));if(-1!==s){const t=l[s];try{if(!t||!t.id)throw new Error("\uc88b\uc544\uc694 ID\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4");if(!(await fetch("http://localhost:817/likes/".concat(t.id),{method:"DELETE"})).ok)throw new Error("\uc88b\uc544\uc694 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4");{const t=[...l];t.splice(s,1),d(t),localStorage.setItem("like",JSON.stringify(t))}}catch(o){console.error("\uc88b\uc544\uc694 \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd:",o)}}}})(e.id),children:"\uc88b\uc544\uc694 \ucde8\uc18c"})]}),(0,a.jsxs)("p",{children:["\uc88b\uc544\uc694 \uc218: ",l.filter((t=>t.boardId===e.id)).length]})]},o)))})]})]})}}}]);
//# sourceMappingURL=955.86c86e96.chunk.js.map