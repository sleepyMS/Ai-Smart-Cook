"use strict";(self.webpackChunkk_project240313=self.webpackChunkk_project240313||[]).push([[354],{354:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(43),s=a(475),o=a(950),r=a(216),l=a(579);const c=e=>{let{onClose:t}=e;const[a,s]=(0,n.useState)(""),[c,i]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),m=JSON.parse(localStorage.getItem("user")),j=(0,r.Zp)();return o.createPortal((0,l.jsx)("div",{className:"loading-modal",children:(0,l.jsx)("div",{className:"loading-content",children:(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault();if(/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,20}$/.test(c))if(a!==c)try{if(!(await fetch("http://localhost:817/peoples/".concat(m.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ID:m.ID,name:m.name,pwd:c,birth:m.birth,phone:m.phone,nick:m.nick})})).ok)throw new Error("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");alert("\ube44\ubc00\ubc88\ud638\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),localStorage.removeItem("user"),j("/"),t()}catch(p){console.error("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc911 \uc624\ub958 \ubc1c\uc0dd:",p),u("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\ud604\uc7ac \uc0ac\uc6a9 \uc911\uc778 \ube44\ubc00\ubc88\ud638\uc785\ub2c8\ub2e4.");else alert("\ud328\uc2a4\uc6cc\ub4dc\ub294 \uc601\uc5b4, \uc22b\uc790, \ud2b9\uc218\ubb38\uc790\ub97c \ud3ec\ud568\ud55c 6~20\uc790 \uc774\ub0b4\ub85c \uc785\ub825\ud574\uc8fc\uc138\uc694.")},children:[(0,l.jsx)("label",{children:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"password",placeholder:"Enter your current password",value:a,onChange:e=>{s(e.target.value)}})}),(0,l.jsx)("label",{children:"\uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"password",placeholder:"Enter your new password",value:c,onChange:e=>{i(e.target.value)}})}),(0,l.jsx)("label",{children:"\uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638 \ud655\uc778"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"password",placeholder:"Confirm your new password",value:d,onChange:e=>{h(e.target.value)}})}),p&&(0,l.jsx)("div",{className:"error",children:p}),(0,l.jsx)("button",{type:"submit",children:"\ud655\uc778"}),(0,l.jsx)("button",{type:"button",onClick:()=>{t()},children:"\ub2eb\uae30"})]})})}),document.body)},i=e=>{let{onClose:t}=e;const[a,s]=(0,n.useState)(""),[c,i]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),m=JSON.parse(localStorage.getItem("user")),j=(0,r.Zp)();return o.createPortal((0,l.jsx)("div",{className:"loading-modal",children:(0,l.jsx)("div",{className:"loading-content",children:(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("http://localhost:817/peoples/?nick=".concat(c));if((await e.json()).length>0)return void alert("\uc774\ubbf8 \uac19\uc740 \ub2c9\ub124\uc784 \uc815\ubcf4\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(!(await fetch("http://localhost:817/peoples/".concat(m.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ID:m.ID,name:m.name,pwd:m.pwd,birth:m.birth,phone:m.phone,nick:c})})).ok)throw new Error("\ub2c9\ub124\uc784 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");alert("\ub2c9\ub124\uc784\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),localStorage.removeItem("user"),j("/"),t()}catch(p){console.error("\ub2c9\ub124\uc784 \ubcc0\uacbd \uc911 \uc624\ub958 \ubc1c\uc0dd:",p),u("\ub2c9\ub124\uc784 \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},children:[(0,l.jsx)("label",{children:"\ud604\uc7ac \ub2c9\ub124\uc784"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",placeholder:"Enter your nick",value:a,onChange:e=>{s(e.target.value)}})}),(0,l.jsx)("label",{children:"\uc0c8\ub85c\uc6b4 \ub2c9\ub124\uc784"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",placeholder:"Enter your new nick",value:c,onChange:e=>{i(e.target.value)}})}),(0,l.jsx)("label",{children:"\uc0c8\ub85c\uc6b4 \ub2c9\ub124\uc784 \ud655\uc778"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",placeholder:"Confirm your new nick",value:d,onChange:e=>{h(e.target.value)}})}),p&&(0,l.jsx)("div",{className:"error",children:p}),(0,l.jsx)("button",{type:"submit",children:"\ud655\uc778"}),(0,l.jsx)("button",{type:"button",onClick:()=>{t()},children:"\ub2eb\uae30"})]})})}),document.body)},d=()=>{const e=JSON.parse(localStorage.getItem("user")),[t,a]=(0,n.useState)([]),[o,r]=(0,n.useState)(!1),[d,h]=(0,n.useState)(!1),[p,u]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{const t=await fetch("http://localhost:817/boards?phone=".concat(e.phone)),n=await t.json();if(a(n),!t.ok)throw new Error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")}catch(t){console.error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",t)}})()}),[e.name]);return(0,l.jsxs)("div",{className:"mypage-container",children:[(0,l.jsx)("h1",{className:"header_logo",children:(0,l.jsx)(s.N_,{to:"/",children:"MOTIV"})}),(0,l.jsxs)("div",{className:"user-info",children:[(0,l.jsxs)("div",{className:"info-label",children:["\ud504\ub85c\ud544",e.name]}),p&&(0,l.jsx)("img",{src:p,alt:"\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0",className:"profile-image"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:async t=>{const a=t.target.files[0],n=new FileReader;n.onloadend=()=>{u(n.result)},a&&n.readAsDataURL(a);try{(await fetch("http://localhost:817/peoples/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ID:e.ID,name:e.name,pwd:e.pwd,birth:e.birth,phone:e.phone,nick:e.nick,img:p})})).ok&&alert("\uc0dd\uc131\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch{}}}),(0,l.jsxs)("div",{className:"info-label",children:["\uc774\ub984: ",e.name]}),(0,l.jsxs)("div",{className:"info-label",children:["\uc774\uba54\uc77c: ",(e=>{const t=e.indexOf("@"),a=e.charAt(0),n=e.charAt(t+1);return"".concat(a,"****@").concat(n,"****")})(e.ID)]}),(0,l.jsxs)("div",{className:"info-label",children:["\ub2c9\ub124\uc784: ",e.nick]}),(0,l.jsx)(s.N_,{className:"change-password-link",onClick:()=>{h(!0)},children:(0,l.jsx)("div",{className:"change-password",children:"\ub2c9\ub124\uc784 \ubcc0\uacbd"})}),(0,l.jsxs)("div",{className:"info-label",children:["\ube44\ubc00\ubc88\ud638: ",(e=>{const t=e.charAt(0),a="*".repeat(e.length-1);return"".concat(t).concat(a)})(e.pwd)]}),(0,l.jsx)(s.N_,{className:"change-password-link",onClick:()=>{r(!0)},children:(0,l.jsx)("div",{className:"change-password",children:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd"})}),(0,l.jsx)("div",{className:"hidden-info",children:e.pwd}),(0,l.jsxs)("div",{className:"info-label",children:["\uc804\ud654\ubc88\ud638: ",(e=>{const t=e.substring(0,5),a=e.substring(8,10);return"".concat(t,"***-").concat(a,"***")})(e.phone)]}),(0,l.jsx)("div",{className:"hidden-info",children:e.phone})]}),(0,l.jsx)("div",{className:"user-posts",children:t.map((e=>(0,l.jsxs)("div",{className:"post",children:[(0,l.jsx)(s.N_,{to:"/inboard/".concat(e.id),className:"post-link",children:(0,l.jsxs)("h3",{className:"post-title",children:["\uc81c\ubaa9: ",e.titleBoard]})}),(0,l.jsx)("button",{onClick:()=>{return n=e.id,void(window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&fetch("http://localhost:817/boards/".concat(n),{method:"DELETE"}).then((e=>{if(!e.ok)throw new Error("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c\ud558\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4");a(t.filter((e=>e.id!==n)))})).catch((e=>console.error("\uac8c\uc2dc\ubb3c \uc0ad\uc81c \uc911 \uc624\ub958 \ubc1c\uc0dd:",e))));var n},children:"\uc0ad\uc81c"})]},e.id)))}),o&&(0,l.jsx)(c,{onClose:()=>{r(!1)}})," ",d&&(0,l.jsx)(i,{onClose:()=>{h(!1)}})," "]})}}}]);
//# sourceMappingURL=354.ca586a87.chunk.js.map